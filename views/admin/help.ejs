<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Help & Support - Salon Admin</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <style>
    .sidebar { min-height: 100vh; background: #2c3e50; }
    .sidebar .nav-link { color: rgba(255,255,255,0.8); padding: 0.75rem 1rem; }
    .sidebar .nav-link:hover, .sidebar .nav-link.active { color: #fff; background: rgba(255,255,255,0.1); }
    .sidebar .nav-link i { margin-right: 0.5rem; }
    .main-content { background: #f8f9fa; min-height: 100vh; }
    .nav-divider { border-top: 1px solid rgba(255,255,255,0.2); margin: 0.5rem 0; }
    .nav-section { color: rgba(255,255,255,0.5); font-size: 0.75rem; padding: 0.5rem 1rem; text-transform: uppercase; }
    .help-card { transition: transform 0.2s; }
    .help-card:hover { transform: translateY(-3px); box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.15); }
    .help-icon { font-size: 2.5rem; }
  </style>
</head>
<body>
  <div class="container-fluid">
    <div class="row">
      <%- include('_sidebar', { token, active: 'help' }) %>

      <main class="col-md-10 ms-sm-auto main-content p-4">
        <h2 class="mb-4"><i class="bi bi-question-circle text-info me-2"></i>Help & Support</h2>

        <!-- Quick Links -->
        <div class="row mb-4">
          <div class="col-md-4 mb-3">
            <div class="card help-card h-100 text-center">
              <div class="card-body">
                <i class="bi bi-book help-icon text-primary mb-3"></i>
                <h5 class="card-title">Documentation</h5>
                <p class="card-text text-muted">Learn how to set up and configure your voice assistant.</p>
                <a href="#documentation" class="btn btn-outline-primary" data-bs-toggle="tooltip" title="View documentation and guides">View Docs</a>
              </div>
            </div>
          </div>
          <div class="col-md-4 mb-3">
            <div class="card help-card h-100 text-center">
              <div class="card-body">
                <i class="bi bi-chat-dots help-icon text-success mb-3"></i>
                <h5 class="card-title">Contact Support</h5>
                <p class="card-text text-muted">Get help from our support team.</p>
                <a href="mailto:support@xyzsalon.com" class="btn btn-outline-success" data-bs-toggle="tooltip" title="Contact support team via email">Email Support</a>
              </div>
            </div>
          </div>
          <div class="col-md-4 mb-3">
            <div class="card help-card h-100 text-center">
              <div class="card-body">
                <i class="bi bi-play-circle help-icon text-danger mb-3"></i>
                <h5 class="card-title">Video Tutorials</h5>
                <p class="card-text text-muted">Watch step-by-step video guides.</p>
                <a href="#tutorials" class="btn btn-outline-danger" data-bs-toggle="tooltip" title="Watch step-by-step video tutorials">Watch Videos</a>
              </div>
            </div>
          </div>
        </div>

        <!-- Documentation Section -->
        <div class="card mb-4" id="documentation">
          <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="bi bi-book me-2"></i>Documentation</h5>
          </div>
          <div class="card-body">
            <div class="accordion" id="docsAccordion">
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#gettingStarted">
                    <i class="bi bi-rocket-takeoff me-2"></i>Getting Started
                  </button>
                </h2>
                <div id="gettingStarted" class="accordion-collapse collapse show" data-bs-parent="#docsAccordion">
                  <div class="accordion-body">
                    <h6>1. Configure Your Greeting</h6>
                    <p>Go to <a href="/SalonSales/admin/greeting?token=<%= token %>">Greeting</a> to customize the message callers hear when they call.</p>

                    <h6>2. Set Up Your Knowledge Base</h6>
                    <p>Add information to the <a href="/SalonSales/admin/kb?token=<%= token %>">Knowledge Base</a> so the AI can answer questions about your event.</p>

                    <h6>3. Configure Voice & Language</h6>
                    <p>Choose your AI assistant's voice and enable languages in <a href="/SalonSales/admin/voices?token=<%= token %>">Voices & Languages</a>.</p>

                    <h6>4. Test Your Setup</h6>
                    <p>Call your Twilio number to test the voice assistant and make sure everything works correctly.</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#kbDocs">
                    <i class="bi bi-book me-2"></i>Knowledge Base
                  </button>
                </h2>
                <div id="kbDocs" class="accordion-collapse collapse" data-bs-parent="#docsAccordion">
                  <div class="accordion-body">
                    <p>The Knowledge Base is the brain of your voice assistant. It contains all the information the AI uses to answer caller questions.</p>

                    <h6>Adding Articles</h6>
                    <ul>
                      <li>Click "New Article" in the Knowledge Base section</li>
                      <li>Give it a descriptive title and slug</li>
                      <li>Write content in Markdown format</li>
                      <li>The system automatically chunks content for optimal retrieval</li>
                    </ul>

                    <h6>Best Practices</h6>
                    <ul>
                      <li>Use clear, conversational language</li>
                      <li>Include specific details like dates, times, and prices</li>
                      <li>Break up long content into multiple articles</li>
                      <li>Update regularly as event details change</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#aiToolsDocs">
                    <i class="bi bi-tools me-2"></i>AI Tools & Functions
                  </button>
                </h2>
                <div id="aiToolsDocs" class="accordion-collapse collapse" data-bs-parent="#docsAccordion">
                  <div class="accordion-body">
                    <p>AI Tools are capabilities you can enable or disable for your voice assistant.</p>

                    <h6>Available Tool Types</h6>
                    <ul>
                      <li><strong>Information Tools:</strong> Get event info, ticket pricing, sponsor info</li>
                      <li><strong>Payment Tools:</strong> Process ticket purchases</li>
                      <li><strong>Booking Tools:</strong> Schedule appointments and callbacks</li>
                      <li><strong>General Tools:</strong> Transfer calls, take messages, send SMS</li>
                    </ul>

                    <h6>Custom Functions</h6>
                    <p>Create custom API integrations in the <a href="/SalonSales/admin/functions?token=<%= token %>">Functions</a> page to connect to external services like Google Calendar.</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#callTransferDocs">
                    <i class="bi bi-telephone-forward me-2"></i>Call Transfer & DTMF
                  </button>
                </h2>
                <div id="callTransferDocs" class="accordion-collapse collapse" data-bs-parent="#docsAccordion">
                  <div class="accordion-body">
                    <h6>Call Transfer</h6>
                    <p>Configure where calls go when callers want to speak with a human. Set up multiple routes for different departments.</p>

                    <h6>DTMF Menu</h6>
                    <p>The DTMF (touch-tone) menu provides a fallback for callers who press digits. Configure options like:</p>
                    <ul>
                      <li>Press 1 for event information</li>
                      <li>Press 2 to buy tickets</li>
                      <li>Press 0 to speak with someone</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- FAQ Section -->
        <div class="card mb-4">
          <div class="card-header bg-info text-white">
            <h5 class="mb-0"><i class="bi bi-patch-question me-2"></i>Frequently Asked Questions</h5>
          </div>
          <div class="card-body">
            <div class="accordion" id="faqAccordion">
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                    How do I change the AI's voice?
                  </button>
                </h2>
                <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Go to <a href="/SalonSales/admin/voices?token=<%= token %>">Voices & Languages</a> and click on a voice card to select it. The change takes effect immediately for new calls.
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                    Why is the AI giving incorrect answers?
                  </button>
                </h2>
                <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Check your <a href="/SalonSales/admin/kb?token=<%= token %>">Knowledge Base</a> to ensure the information is correct and up-to-date. The AI can only answer based on what's in the KB. Also check the confidence threshold in <a href="/SalonSales/admin/settings?token=<%= token %>">Settings</a>.
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                    How do I add support for other languages?
                  </button>
                </h2>
                <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Go to <a href="/SalonSales/admin/voices?token=<%= token %>">Voices & Languages</a> and click "Add Language". You'll need to create Knowledge Base content in each language you enable.
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                    How do I see call history?
                  </button>
                </h2>
                <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                  <div class="accordion-body">
                    Visit <a href="/SalonSales/admin/calls?token=<%= token %>">Call Logs</a> to see all incoming calls, including duration, status, and conversation transcripts.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Contact Support -->
        <div class="card">
          <div class="card-header bg-success text-white">
            <h5 class="mb-0"><i class="bi bi-headset me-2"></i>Contact Support</h5>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-6">
                <h6><i class="bi bi-envelope me-2"></i>Email Support</h6>
                <p>For general inquiries and technical support:</p>
                <a href="mailto:support@xyzsalon.com" class="btn btn-outline-primary" data-bs-toggle="tooltip" title="Send an email to support">
                  <i class="bi bi-envelope me-2"></i>support@xyzsalon.com
                </a>
              </div>
              <div class="col-md-6">
                <h6><i class="bi bi-telephone me-2"></i>Phone Support</h6>
                <p>For urgent issues during business hours:</p>
                <a href="tel:+15551234567" class="btn btn-outline-primary" data-bs-toggle="tooltip" title="Call support during business hours">
                  <i class="bi bi-telephone me-2"></i>+1 (555) 123-4567
                </a>
              </div>
            </div>
            <hr>
            <div class="row mt-3">
              <div class="col-12">
                <h6><i class="bi bi-clock me-2"></i>Support Hours</h6>
                <p class="mb-0">Monday - Friday: 9:00 AM - 5:00 PM EST<br>
                Saturday - Sunday: Closed</p>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    tooltipTriggerList.map(function (el) { return new bootstrap.Tooltip(el) });
  </script>
</body>
</html>
